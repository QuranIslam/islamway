if(typeof trans=="undefined"){var trans=[]}trans.commons={send_to_friend:"أرسل الى صديق"};
if(typeof trans=="undefined"){var trans=[]}trans.content_management={like:"إعجاب",unlike:"إلغاء الإعجاب",dislike:"عدم إعجاب",undislike:"إلغاء عدم الإعجاب"};
if(typeof trans=="undefined"){var trans=[]}trans.rawafedcomments={report_comment:"الإبلاغ عن التعليق",you_must_write_report_comment:"لابد من كتابة سبب للبلاغ",your_report_has_been_sent:"تم إرسال البلاغ الخاص بك",cancel:"إلغاء الأمر",send:"إرسال"};
if(typeof trans=="undefined"){var trans=[]}trans.islamway={dfp_id:"4519186",an_error_occurred_while_trying_to_shared_entry:"حدث خطأ أثناء محاولة المشاركة",entry_shared_successfully:"تمت المشاركة بنجاح",post_reported_successfully:"تم الإبلاغ عن المادة",loading_cities:"جاري جلب قائمة المدن",loading_prayertimes:"جاري تحديث أوقات الصلاة",post_url:"رابط المادة",post_delete_confirm_message:"سيتم حذف المنشور .. هل تريد الإستمرار؟",recent:"الأحدث",smiles:"وجوه تعبيرية",nature:"الطبيعة",food_drink:"أطعمة ومشروبات",activity:"أنشطة",travel_places:"سفر وأماكن",objects:"عناصر",symbols:"رموز",prev:"&rarr; السابق",next:"التالى &larr;",end:"إنهاء",skip:"تخطي"};
(function(t,e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else if(typeof exports==="object"){module.exports=e(require("jquery"))}else{e(t.jQuery)}})(this,function(t){t.transit={version:"0.9.12",propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:true,useTransitionEnd:false};var e=document.createElement("div");var n={};function i(t){if(t in e.style)return t;var n=["Moz","Webkit","O","ms"];var i=t.charAt(0).toUpperCase()+t.substr(1);for(var r=0;r<n.length;++r){var s=n[r]+i;if(s in e.style){return s}}}function r(){e.style[n.transform]="";e.style[n.transform]="rotateY(90deg)";return e.style[n.transform]!==""}var s=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;n.transition=i("transition");n.transitionDelay=i("transitionDelay");n.transform=i("transform");n.transformOrigin=i("transformOrigin");n.filter=i("Filter");n.transform3d=r();var a={transition:"transitionend",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"};var o=n.transitionEnd=a[n.transition]||null;for(var u in n){if(n.hasOwnProperty(u)&&typeof t.support[u]==="undefined"){t.support[u]=n[u]}}e=null;t.cssEase={_default:"ease",in:"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeInCubic:"cubic-bezier(.550,.055,.675,.190)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"};t.cssHooks["transit:transform"]={get:function(e){return t(e).data("transform")||new f},set:function(e,i){var r=i;if(!(r instanceof f)){r=new f(r)}if(n.transform==="WebkitTransform"&&!s){e.style[n.transform]=r.toString(true)}else{e.style[n.transform]=r.toString()}t(e).data("transform",r)}};t.cssHooks.transform={set:t.cssHooks["transit:transform"].set};t.cssHooks.filter={get:function(t){return t.style[n.filter]},set:function(t,e){t.style[n.filter]=e}};if(t.fn.jquery<"1.8"){t.cssHooks.transformOrigin={get:function(t){return t.style[n.transformOrigin]},set:function(t,e){t.style[n.transformOrigin]=e}};t.cssHooks.transition={get:function(t){return t.style[n.transition]},set:function(t,e){t.style[n.transition]=e}}}p("scale");p("scaleX");p("scaleY");p("translate");p("rotate");p("rotateX");p("rotateY");p("rotate3d");p("perspective");p("skewX");p("skewY");p("x",true);p("y",true);function f(t){if(typeof t==="string"){this.parse(t)}return this}f.prototype={setFromString:function(t,e){var n=typeof e==="string"?e.split(","):e.constructor===Array?e:[e];n.unshift(t);f.prototype.set.apply(this,n)},set:function(t){var e=Array.prototype.slice.apply(arguments,[1]);if(this.setter[t]){this.setter[t].apply(this,e)}else{this[t]=e.join(",")}},get:function(t){if(this.getter[t]){return this.getter[t].apply(this)}else{return this[t]||0}},setter:{rotate:function(t){this.rotate=b(t,"deg")},rotateX:function(t){this.rotateX=b(t,"deg")},rotateY:function(t){this.rotateY=b(t,"deg")},scale:function(t,e){if(e===undefined){e=t}this.scale=t+","+e},skewX:function(t){this.skewX=b(t,"deg")},skewY:function(t){this.skewY=b(t,"deg")},perspective:function(t){this.perspective=b(t,"px")},x:function(t){this.set("translate",t,null)},y:function(t){this.set("translate",null,t)},translate:function(t,e){if(this._translateX===undefined){this._translateX=0}if(this._translateY===undefined){this._translateY=0}if(t!==null&&t!==undefined){this._translateX=b(t,"px")}if(e!==null&&e!==undefined){this._translateY=b(e,"px")}this.translate=this._translateX+","+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},scale:function(){var t=(this.scale||"1,1").split(",");if(t[0]){t[0]=parseFloat(t[0])}if(t[1]){t[1]=parseFloat(t[1])}return t[0]===t[1]?t[0]:t},rotate3d:function(){var t=(this.rotate3d||"0,0,0,0deg").split(",");for(var e=0;e<=3;++e){if(t[e]){t[e]=parseFloat(t[e])}}if(t[3]){t[3]=b(t[3],"deg")}return t}},parse:function(t){var e=this;t.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(t,n,i){e.setFromString(n,i)})},toString:function(t){var e=[];for(var i in this){if(this.hasOwnProperty(i)){if(!n.transform3d&&(i==="rotateX"||i==="rotateY"||i==="perspective"||i==="transformOrigin")){continue}if(i[0]!=="_"){if(t&&i==="scale"){e.push(i+"3d("+this[i]+",1)")}else if(t&&i==="translate"){e.push(i+"3d("+this[i]+",0)")}else{e.push(i+"("+this[i]+")")}}}}return e.join(" ")}};function c(t,e,n){if(e===true){t.queue(n)}else if(e){t.queue(e,n)}else{t.each(function(){n.call(this)})}}function l(e){var i=[];t.each(e,function(e){e=t.camelCase(e);e=t.transit.propertyMap[e]||t.cssProps[e]||e;e=h(e);if(n[e])e=h(n[e]);if(t.inArray(e,i)===-1){i.push(e)}});return i}function d(e,n,i,r){var s=l(e);if(t.cssEase[i]){i=t.cssEase[i]}var a=""+y(n)+" "+i;if(parseInt(r,10)>0){a+=" "+y(r)}var o=[];t.each(s,function(t,e){o.push(e+" "+a)});return o.join(", ")}t.fn.transition=t.fn.transit=function(e,i,r,s){var a=this;var u=0;var f=true;var l=t.extend(true,{},e);if(typeof i==="function"){s=i;i=undefined}if(typeof i==="object"){r=i.easing;u=i.delay||0;f=typeof i.queue==="undefined"?true:i.queue;s=i.complete;i=i.duration}if(typeof r==="function"){s=r;r=undefined}if(typeof l.easing!=="undefined"){r=l.easing;delete l.easing}if(typeof l.duration!=="undefined"){i=l.duration;delete l.duration}if(typeof l.complete!=="undefined"){s=l.complete;delete l.complete}if(typeof l.queue!=="undefined"){f=l.queue;delete l.queue}if(typeof l.delay!=="undefined"){u=l.delay;delete l.delay}if(typeof i==="undefined"){i=t.fx.speeds._default}if(typeof r==="undefined"){r=t.cssEase._default}i=y(i);var p=d(l,i,r,u);var h=t.transit.enabled&&n.transition;var b=h?parseInt(i,10)+parseInt(u,10):0;if(b===0){var g=function(t){a.css(l);if(s){s.apply(a)}if(t){t()}};c(a,f,g);return a}var m={};var v=function(e){var i=false;var r=function(){if(i){a.unbind(o,r)}if(b>0){a.each(function(){this.style[n.transition]=m[this]||null})}if(typeof s==="function"){s.apply(a)}if(typeof e==="function"){e()}};if(b>0&&o&&t.transit.useTransitionEnd){i=true;a.bind(o,r)}else{window.setTimeout(r,b)}a.each(function(){if(b>0){this.style[n.transition]=p}t(this).css(l)})};var z=function(t){this.offsetWidth;v(t)};c(a,f,z);return this};function p(e,i){if(!i){t.cssNumber[e]=true}t.transit.propertyMap[e]=n.transform;t.cssHooks[e]={get:function(n){var i=t(n).css("transit:transform");return i.get(e)},set:function(n,i){var r=t(n).css("transit:transform");r.setFromString(e,i);t(n).css({"transit:transform":r})}}}function h(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}function b(t,e){if(typeof t==="string"&&!t.match(/^[\-0-9\.]+$/)){return t}else{return""+t+e}}function y(e){var n=e;if(typeof n==="string"&&!n.match(/^[\-0-9\.]+/)){n=t.fx.speeds[n]||t.fx.speeds._default}return b(n,"ms")}t.transit.getTransitionValue=d;return t});
!function(t,o){"use strict";"function"==typeof define&&define.amd?define(["jquery"],o):"object"==typeof exports?module.exports=o(require("jquery")):t.bootbox=o(t.jQuery)}(this,function t(o,e){"use strict";function a(t){var o=C[f.locale];return o?o[t]:C.en[t]}function n(t,e,a){t.stopPropagation(),t.preventDefault();var n=o.isFunction(a)&&a.call(e,t)===!1;n||e.modal("hide")}function r(t){var o,e=0;for(o in t)e++;return e}function l(t,e){var a=0;o.each(t,function(t,o){e(t,o,a++)})}function i(t){var e,a;if("object"!=typeof t)throw new Error("Please supply an object of options");if(!t.message)throw new Error("Please specify a message");return t=o.extend({},f,t),t.buttons||(t.buttons={}),e=t.buttons,a=r(e),l(e,function(t,n,r){if(o.isFunction(n)&&(n=e[t]={callback:n}),"object"!==o.type(n))throw new Error("button with key "+t+" must be an object");n.label||(n.label=t),n.className||(n.className=2>=a&&r===a-1?"btn-primary":"btn-default")}),t}function c(t,o){var e=t.length,a={};if(1>e||e>2)throw new Error("Invalid argument length");return 2===e||"string"==typeof t[0]?(a[o[0]]=t[0],a[o[1]]=t[1]):a=t[0],a}function s(t,e,a){return o.extend(!0,{},t,c(e,a))}function u(t,o,e,a){var n={className:"bootbox-"+t,buttons:p.apply(null,o)};return b(s(n,a,e),o)}function p(){for(var t={},o=0,e=arguments.length;e>o;o++){var n=arguments[o],r=n.toLowerCase(),l=n.toUpperCase();t[r]={label:a(l)}}return t}function b(t,o){var a={};return l(o,function(t,o){a[o]=!0}),l(t.buttons,function(t){if(a[t]===e)throw new Error("button key "+t+" is not allowed (options are "+o.join("\n")+")")}),t}var d={dialog:"<div class='bootbox modal' tabindex='-1' role='dialog'><div class='modal-dialog'><div class='modal-content'><div class='modal-body'><div class='bootbox-body'></div></div></div></div></div>",header:"<div class='modal-header'><h4 class='modal-title'></h4></div>",footer:"<div class='modal-footer'></div>",closeButton:"<button type='button' class='bootbox-close-button close' data-dismiss='modal' aria-hidden='true'>&times;</button>",form:"<form class='bootbox-form'></form>",inputs:{text:"<input class='bootbox-input bootbox-input-text form-control' autocomplete=off type=text />",textarea:"<textarea class='bootbox-input bootbox-input-textarea form-control'></textarea>",email:"<input class='bootbox-input bootbox-input-email form-control' autocomplete='off' type='email' />",select:"<select class='bootbox-input bootbox-input-select form-control'></select>",checkbox:"<div class='checkbox'><label><input class='bootbox-input bootbox-input-checkbox' type='checkbox' /></label></div>",date:"<input class='bootbox-input bootbox-input-date form-control' autocomplete=off type='date' />",time:"<input class='bootbox-input bootbox-input-time form-control' autocomplete=off type='time' />",number:"<input class='bootbox-input bootbox-input-number form-control' autocomplete=off type='number' />",password:"<input class='bootbox-input bootbox-input-password form-control' autocomplete='off' type='password' />"}},f={locale:"en",backdrop:"static",animate:!0,className:null,closeButton:!0,show:!0,container:"body"},m={};m.alert=function(){var t;if(t=u("alert",["ok"],["message","callback"],arguments),t.callback&&!o.isFunction(t.callback))throw new Error("alert requires callback property to be a function when provided");return t.buttons.ok.callback=t.onEscape=function(){return o.isFunction(t.callback)?t.callback.call(this):!0},m.dialog(t)},m.confirm=function(){var t;if(t=u("confirm",["cancel","confirm"],["message","callback"],arguments),t.buttons.cancel.callback=t.onEscape=function(){return t.callback.call(this,!1)},t.buttons.confirm.callback=function(){return t.callback.call(this,!0)},!o.isFunction(t.callback))throw new Error("confirm requires a callback");return m.dialog(t)},m.prompt=function(){var t,a,n,r,i,c,u;if(r=o(d.form),a={className:"bootbox-prompt",buttons:p("cancel","confirm"),value:"",inputType:"text"},t=b(s(a,arguments,["title","callback"]),["cancel","confirm"]),c=t.show===e?!0:t.show,t.message=r,t.buttons.cancel.callback=t.onEscape=function(){return t.callback.call(this,null)},t.buttons.confirm.callback=function(){var e;switch(t.inputType){case"text":case"textarea":case"email":case"select":case"date":case"time":case"number":case"password":e=i.val();break;case"checkbox":var a=i.find("input:checked");e=[],l(a,function(t,a){e.push(o(a).val())})}return t.callback.call(this,e)},t.show=!1,!t.title)throw new Error("prompt requires a title");if(!o.isFunction(t.callback))throw new Error("prompt requires a callback");if(!d.inputs[t.inputType])throw new Error("invalid prompt type");switch(i=o(d.inputs[t.inputType]),t.inputType){case"text":case"textarea":case"email":case"date":case"time":case"number":case"password":i.val(t.value);break;case"select":var f={};if(u=t.inputOptions||[],!o.isArray(u))throw new Error("Please pass an array of input options");if(!u.length)throw new Error("prompt with select requires options");l(u,function(t,a){var n=i;if(a.value===e||a.text===e)throw new Error("given options in wrong format");a.group&&(f[a.group]||(f[a.group]=o("<optgroup/>").attr("label",a.group)),n=f[a.group]),n.append("<option value='"+a.value+"'>"+a.text+"</option>")}),l(f,function(t,o){i.append(o)}),i.val(t.value);break;case"checkbox":var C=o.isArray(t.value)?t.value:[t.value];if(u=t.inputOptions||[],!u.length)throw new Error("prompt with checkbox requires options");if(!u[0].value||!u[0].text)throw new Error("given options in wrong format");i=o("<div/>"),l(u,function(e,a){var n=o(d.inputs[t.inputType]);n.find("input").attr("value",a.value),n.find("label").append(a.text),l(C,function(t,o){o===a.value&&n.find("input").prop("checked",!0)}),i.append(n)})}return t.placeholder&&i.attr("placeholder",t.placeholder),t.pattern&&i.attr("pattern",t.pattern),t.maxlength&&i.attr("maxlength",t.maxlength),r.append(i),r.on("submit",function(t){t.preventDefault(),t.stopPropagation(),n.find(".btn-primary").click()}),n=m.dialog(t),n.off("shown.bs.modal"),n.on("shown.bs.modal",function(){i.focus()}),c===!0&&n.modal("show"),n},m.dialog=function(t){t=i(t);var a=o(d.dialog),r=a.find(".modal-dialog"),c=a.find(".modal-body"),s=t.buttons,u="",p={onEscape:t.onEscape};if(o.fn.modal===e)throw new Error("$.fn.modal is not defined; please double check you have included the Bootstrap JavaScript library. See http://getbootstrap.com/javascript/ for more details.");if(l(s,function(t,o){u+="<button data-bb-handler='"+t+"' type='button' class='btn "+o.className+"'>"+o.label+"</button>",p[t]=o.callback}),c.find(".bootbox-body").html(t.message),t.animate===!0&&a.addClass("fade"),t.className&&a.addClass(t.className),"large"===t.size?r.addClass("modal-lg"):"small"===t.size&&r.addClass("modal-sm"),t.title&&c.before(d.header),t.closeButton){var b=o(d.closeButton);t.title?a.find(".modal-header").prepend(b):b.css("margin-top","-10px").prependTo(c)}return t.title&&a.find(".modal-title").html(t.title),u.length&&(c.after(d.footer),a.find(".modal-footer").html(u)),a.on("hidden.bs.modal",function(t){t.target===this&&a.remove()}),a.on("shown.bs.modal",function(){a.find(".btn-primary:first").focus()}),"static"!==t.backdrop&&a.on("click.dismiss.bs.modal",function(t){a.children(".modal-backdrop").length&&(t.currentTarget=a.children(".modal-backdrop").get(0)),t.target===t.currentTarget&&a.trigger("escape.close.bb")}),a.on("escape.close.bb",function(t){p.onEscape&&n(t,a,p.onEscape)}),a.on("click",".modal-footer button",function(t){var e=o(this).data("bb-handler");n(t,a,p[e])}),a.on("click",".bootbox-close-button",function(t){n(t,a,p.onEscape)}),a.on("keyup",function(t){27===t.which&&a.trigger("escape.close.bb")}),o(t.container).append(a),a.modal({backdrop:t.backdrop?"static":!1,keyboard:!1,show:!1}),t.show&&a.modal("show"),a},m.setDefaults=function(){var t={};2===arguments.length?t[arguments[0]]=arguments[1]:t=arguments[0],o.extend(f,t)},m.hideAll=function(){return o(".bootbox").modal("hide"),m};var C={bg_BG:{OK:"Ок",CANCEL:"Отказ",CONFIRM:"Потвърждавам"},ar:{OK:"موافق",CANCEL:"إلغاء الأمر",CONFIRM:"تأكيد"},br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},cs:{OK:"OK",CANCEL:"Zrušit",CONFIRM:"Potvrdit"},da:{OK:"OK",CANCEL:"Annuller",CONFIRM:"Accepter"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},el:{OK:"Εντάξει",CANCEL:"Ακύρωση",CONFIRM:"Επιβεβαίωση"},en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},et:{OK:"OK",CANCEL:"Katkesta",CONFIRM:"OK"},fa:{OK:"قبول",CANCEL:"لغو",CONFIRM:"تایید"},fi:{OK:"OK",CANCEL:"Peruuta",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"D'accord"},he:{OK:"אישור",CANCEL:"ביטול",CONFIRM:"אישור"},hu:{OK:"OK",CANCEL:"Mégsem",CONFIRM:"Megerősít"},hr:{OK:"OK",CANCEL:"Odustani",CONFIRM:"Potvrdi"},id:{OK:"OK",CANCEL:"Batal",CONFIRM:"OK"},it:{OK:"OK",CANCEL:"Annulla",CONFIRM:"Conferma"},ja:{OK:"OK",CANCEL:"キャンセル",CONFIRM:"確認"},lt:{OK:"Gerai",CANCEL:"Atšaukti",CONFIRM:"Patvirtinti"},lv:{OK:"Labi",CANCEL:"Atcelt",CONFIRM:"Apstiprināt"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},no:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},pl:{OK:"OK",CANCEL:"Anuluj",CONFIRM:"Potwierdź"},pt:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Confirmar"},ru:{OK:"OK",CANCEL:"Отмена",CONFIRM:"Применить"},sq:{OK:"OK",CANCEL:"Anulo",CONFIRM:"Prano"},sv:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},th:{OK:"ตกลง",CANCEL:"ยกเลิก",CONFIRM:"ยืนยัน"},tr:{OK:"Tamam",CANCEL:"İptal",CONFIRM:"Onayla"},zh_CN:{OK:"OK",CANCEL:"取消",CONFIRM:"确认"},zh_TW:{OK:"OK",CANCEL:"取消",CONFIRM:"確認"}};return m.addLocale=function(t,e){return o.each(["OK","CANCEL","CONFIRM"],function(t,o){if(!e[o])throw new Error("Please supply a translation for '"+o+"'")}),C[t]={OK:e.OK,CANCEL:e.CANCEL,CONFIRM:e.CONFIRM},m},m.removeLocale=function(t){return delete C[t],m},m.setLocale=function(t){return m.setDefaults("locale",t)},m.init=function(e){return t(e||o)},m});
var friendshipOptionSelector="[friendship-option]";var friendshipOptionsContainerSelector="[friendship-options]";var friendShipLoader=$('<div class="friendship-Loader"><img src="'+imgLoader+'"/></div>');$(document).on("click",friendshipOptionSelector,function(){var url=$(this).attr("data-url");var $this=$(this).prop("disabled",true);var closest=$this.closest(friendshipOptionsContainerSelector);$(closest).prepend(friendShipLoader);ifLoggedIn(function(){$.post(url,function(data){if(data.status==true){var html=$(data.html).html();$this.closest(friendshipOptionsContainerSelector).html(html)}else{bootbox.alert(data.message)}}).always(function(){$this.prop("disabled",false)})})});
(function(b,c){var $=b.jQuery||b.Cowboy||(b.Cowboy={}),a;$.throttle=a=function(e,f,j,i){var h,d=0;if(typeof f!=="boolean"){i=j;j=f;f=c}function g(){var o=this,m=+new Date-d,n=arguments;function l(){d=+new Date;j.apply(o,n)}function k(){h=c}if(i&&!h){l()}h&&clearTimeout(h);if(i===c&&m>e){l()}else{if(f!==true){h=setTimeout(i?k:l,i===c?e-m:e)}}}if($.guid){g.guid=j.guid=j.guid||$.guid++}return g};$.debounce=function(d,e,f){return f===c?a(d,e,false):a(d,f,e!==false)}})(this);function setupUnlimitedScroll(data,onSuccess,options){var defaultOptions={autoLoad:true};if(typeof options!=="object"){options=defaultOptions}else{for(var option in defaultOptions){if(!options.hasOwnProperty(option)){options["'"+option+"'"]=defaultOptions["'"+option+"'"]}}}$(document).on("click","#load-more",function(e){e.preventDefault();loadMoreEntries(data,onSuccess)});$(window).scroll($.throttle(200,function(){if($("#load-more").length>0){var __lastPagingAnchor=$(".page-anchor:not([data-loaded])").last();if(__lastPagingAnchor.length>0){var offset=__lastPagingAnchor.offset();if(typeof offset!=="undefined"&&offset.top<=$(window).scrollTop()&&options.autoLoad===true){loadMoreEntries(data,onSuccess)}}}}));function loadMoreEntries(data,onSuccess){var url=$("#load-more").attr("href");loadPage(url,$("#pager-wpr"),data,onSuccess)}}function loadPage(url,placeholder,data,onSuccess){var dataToSend={};if(arguments.length>2&&data){if($.isFunction(data)){dataToSend=data()}else{dataToSend=data}}var successCallback=null;if(arguments.length>3&&onSuccess&&$.isFunction(onSuccess)){successCallback=onSuccess}$("#pager-wpr").html('<img src="/bundles/rawafedcommons/images/progress-indicator.gif" alt="Loading ..." />');var __lastPagingAnchor=$(".page-anchor:not([data-loaded])").last();__lastPagingAnchor.attr("data-loaded","...");$.ajax(url,{data:dataToSend,success:function(response){__lastPagingAnchor.attr("data-loaded","on");if(typeof response==="string"){placeholder.replaceWith(response)}if(successCallback)successCallback(response);if(typeof ga!=="undefined"){ga("send","pageview",{page:url,title:document.title+" - Ajax Loaded ("+getQueryStringValue("page",url)+")"})}},error:function(jqXHR){$("#pager-wpr").html(jqXHR.status==404?"":'<img src="/bundles/rawafedcommons/images/warning-16.png" alt="" />')}})}function createModalDialog(id,title,hasFooter){var footerHtml=hasFooter?'<div class="modal-footer"></div>':"";var dialogHtml='<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">%title%</h4></div><div class="modal-body"></div>'+footerHtml+"</div></div>";$('<div id="'+id+'" class="modal fade" tabindex="-1" role="dialog"></div>').appendTo("body");$("#"+id).html(dialogHtml.replace("%title%",title));return $("#"+id)}function ajaxifyFormSubmit(formId,onDone){$(":submit",formId).click(function(event){event.preventDefault();$(this).prop("disabled",true).append("...");$("input, textarea",formId).prop("readonly",true);$.post($(formId).attr("action"),$(formId).serialize(),function(data){$(formId).parent().html(data).hide().fadeIn();if(onDone){onDone()}ajaxifyFormSubmit(formId,onDone)})})}window.CKEDITOR_BASEPATH="/bundles/rawafedcommons/js/ckeditor-4.7.1/";window.CKFINDER_BASEPATH="/bundles/rawafedcommons/js/ckfinder-2.4.2/";if(typeof CONFIG=="undefined"){window.CONFIG={}}function setupEditor(id,imagesDirectory,dirType,directoryUrl,language){if(!directoryUrl){directoryUrl=""}$.ajax({dataType:"script",cache:true,url:window.CKEDITOR_BASEPATH+"ckeditor.js"}).done(function(){$("#"+id).data("html","");var options={width:"100%",extraPlugins:"islamicstyles,resize,preview"};if(language){options.language=language}if($("body").hasClass("rtl")){options.contentsLangDirection="rtl"}var height=$("#"+id).data("height");options.height=height;mode=$("#"+id).data("mode");options.specialChars=["&#xFDF2;","&#xFDFB;","&#xFDF4;","&#xFDFA;","&#x06DD;","&#x06DE;","&#x06E9;","&#xFD3E;","&#xFD3F;","&#x06D6;","&#x06D7;","&#x06D8;","&#x06D9;","&#x06DA;","&#x06DB;","&#x060F;","&#x06AA;","&#x06AF;","&#x263D;","&#x263E;","&#x1F311;","&#x1F312;","&#x1F313;","&#x1F314;","&#x1F315;","&#x1F316;","&#x1F317;","&#x1F318;","&#x1F319;","&#x027EA;","&#x027EB;","&langle;","&rangle;","&lsaquo;","&rsaquo;","&ldquo;","&rdquo;","&lsquo;","&rsquo;","&commat;","&amp;","&copy;","&copysr;","&trade;","&reg;","&para;","&sect;","&micro;","&target;","&dollar;","&euro;","&yen;","&pound;","&cent;","&percnt;","&ast;","&larr;","&uarr;","&rarr;","&darr;","&forall;","&part;","&exist;","&empty;","&nabla;","&isin;","&notin;","&ni;","&prod;","&sum;","&Alpha;","&Beta;","&Gamma;","&Delta;","&Epsilon;","&Zeta;"];if(typeof CONFIG!="undefined"&&CONFIG.htmlEditor&&CONFIG.htmlEditor.contentsCss){options.contentsCss=CONFIG.htmlEditor.contentsCss;options.bodyClass="html";options.justifyClasses=["text-left","text-center","text-right","text-justify"]}if(mode=="simple"){options.removePlugins="image,horizontalrule,table,oembed,tweetabletext,footnotes";options.toolbarGroups=[{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks"]},{name:"more",groups:["links","insert"]},{name:"others"}]}else{options.removeButtons="Subscript,Superscript";options.footnotesTitle=language=="ar"?"الحواشي":"Footnotes";if(typeof CONFIG!="undefined"&&CONFIG.htmlEditor&&CONFIG.htmlEditor.ampFriendly){CONFIG.htmlEditor.allowAllTags=false;options.removePlugins="image,table,oembed";options.removeButtons+=",BGColor,TextColor,Font,FontSize,Source";options.disallowedContent="*{*}"}else{options.pasteFromWordRemoveStyles=false;options.pasteFromWordRemoveFontStyles=false}if(typeof CONFIG!="undefined"&&CONFIG.htmlEditor&&CONFIG.htmlEditor.allowAllTags){options.allowedContent=true}if(imagesDirectory){options.filebrowserImageBrowseUrl=window.CKFINDER_BASEPATH+"ckfinder.html?id="+imagesDirectory+"|"+dirType+"|"+directoryUrl+"|"+window.ROUTE_NAME+"&type=Images";options.filebrowserImageUploadUrl=window.CKFINDER_BASEPATH+"core/connector/php/connector.php?command=QuickUpload&type=Images"}var fonts=["Arial","Courier New","Times New Roman"];fonts=fonts.concat(CONFIG.htmlEditor.fonts);if(language=="ar"){fonts=fonts.concat(["Traditional Arabic","Arabic Transparent","Simplified Arabic","Tahoma"])}else{fonts=fonts.concat(["Verdana","Comic Sans MS","Trebuchet MS","Georgia"])}options.font_names=fonts.sort().join(";")}CKEDITOR.replace(id,options)})}function setupEditors(){$("textarea[data-html]").each(function(){if($(this).data("html")=="on"){var id=$(this).attr("id");var language=$(this).data("language");var imagesDirectory=$(this).data("directory");var imagesDirectoryPath=$(this).data("directory-path");var dirType=$.trim(imagesDirectoryPath).length>0?"path":"directory";var directoryUrl=$(this).data("directory-url");if(dirType=="path"){imagesDirectory=imagesDirectoryPath}setupEditor(id,imagesDirectory,dirType,directoryUrl,language)}})}setupEditors();function showSharingIcons(container){container=$(container);var html="";var url=container.data("url");if(!url){url=document.location.href}var title=container.data("title");if(!title){title=document.title}var showCounts=container.data("counts")=="on";if(CONFIG.InternalSharing){html+='<a class="share-rn" href="javascript:void(0)"><span class="icon-logo-gray"><span class="p1"></span><span class="p2"></span></span></a>'}if(Device.isIOS()||Device.isAndroid()){html+='<a class="share-wa" target="_blank" href="whatsapp://send?text='+encodeURIComponent(title+" - "+url)+'"><span class="icon-whatsapp"></span></a>';html+='<a class="share-tg" target="_blank" rel="noopener noreferrer" href="https://telegram.me/share/url?url='+encodeURIComponent(url)+"&text="+encodeURIComponent(title)+'"><span class="icon-telegram"></span></a>';html+='<a class="share-fm" target="_blank" href="fb-messenger://share?link='+encodeURIComponent(url)+(CONFIG.FacebookAppId?"&app_id="+CONFIG.FacebookAppId:"")+'"><span class="icon-fb-messenger"></span></a>'}if(CONFIG.FacebookAppId){html+='<a class="share-fb" target="_blank" rel="noopener noreferrer external" href="https://www.facebook.com/dialog/share?app_id='+CONFIG.FacebookAppId+"&display=popup&href="+url+"&redirect_uri="+location.protocol+"//"+location.host+'/fb_redirect.html"><span class="icon-facebook"></span></a>'}else{html+='<a class="share-fb" target="_blank" rel="noopener noreferrer external" href="https://www.facebook.com/sharer/sharer.php?u='+url+'&display=popup"><span class="icon-facebook"></span></a>'}if(showCounts){html+='<span class="counter count-fb"></span>'}html+='<a class="share-gp" target="_blank" rel="noopener noreferrer" href="https://plus.google.com/share?url='+url+"&t="+title+'"><span class="icon-google-plus"></span></a>';if(showCounts){html+='<span class="counter count-gp"></span>'}html+='<a class="share-tw" target="_blank" rel="noopener noreferrer" href="https://twitter.com/intent/tweet?text='+title+"%0a&url="+url+(CONFIG.TwitterAccount?"&via="+CONFIG.TwitterAccount:"")+'"><span class="icon-twitter"></span></a>';if(Device.isIOS()||Device.isAndroid()){var _ch=Device.isIOS()?"&":"?";href="sms:"+_ch+"body="+encodeURIComponent(title+" - "+url);html+='<a class="send-sms" href="'+href+'" title="'+trans.commons.send_to_friend+'"><span class="icon-sms"></span></a>'}else{html+='<a class="send-mail" href="/send-to-friend" title="'+trans.commons.send_to_friend+'"><span class="icon-mail"></span></a>';var image=container.data("image");if(image){html+='<a class="share-pt" target="_blank" rel="noopener noreferrer" href="http://www.pinterest.com/pin/create/button/?url='+url+"&description="+title+"&media="+image+'"><span class="icon-pinterest"></span></a>';if(showCounts){html+='<span class="counter count-pt"></span>'}}}container.append(html);$(document).on("click","a.send-mail",function(ev){ev.preventDefault();ev.stopPropagation();sendToFriend(this)});$(document).on("click",'div.sharing-icons a[rel*="external"]',function(ev){ev.preventDefault();var url=$(this).parent().data("url");var title=$(this).parent().data("title");var shareUrl=this.href.replace(/{URL}/g,url).replace(/{TEXT}/g,title);window.open(shareUrl,"_sharingWindow","width=700,height=480,left="+(screen.width/2-350)+",top=100")});if(showCounts){getSharingCounts(container)}}function sendToFriend(link){var url=$(link).attr("href");var title=$(link).attr("title");createModalDialog("send-to-friend-dlg",title);$("#send-to-friend-dlg .modal-body").load(url,function(){$("#send-to-friend-dlg").modal("show");var container=$(link).parent();$("#send_to_friend_title").val(container.data("title")?container.data("title"):document.title);$("#send_to_friend_url").val(container.data("url")?container.data("url"):document.location.href);ajaxifyFormSubmit("#send-to-friend-dlg form")})}function getSharingCounts(container){loadFacebookLib();var url=container.data("url");$.ajax({type:"get",dataType:"xml",url:"https://api.facebook.com/restserver.php?method=links.getStats&urls="+url}).done(function(xml){$xml=$(xml);var likes=parseInt($xml.find("total_count").text());$(".count-fb",container).text(likes||0);if(likes>0){$(".count-fb",container).after('<meta itemprop="interactionCount" content="FacebookLikes:'+likes+'"/>')}});$LAB.setOptions({AlwaysPreserveOrder:true}).script("https://apis.google.com/js/plusone.js").script("https://apis.google.com/js/client:plusone.js?onload=_gplusCallback").wait(function(){if(gapi&&gapi.client){var params={nolog:true,id:url,source:"widget",userId:"@viewer",groupId:"@self"};gapi.client.rpcRequest("pos.plusones.get","v1",params).execute(function(resp){$(".count-gp",container).text(resp.result.metadata.globalCounts.count||0)})}else{window._gplus_url=url}});if($(".count-pt",container).length){var script=document.createElement("script");script.async=true;script.src="http://api.pinterest.com/v1/urls/count.json?url="+url+"&callback=_pinterestCallback";document.body.appendChild(script)}}function _pinterestCallback(result){var url=encodeURI(JSON.parse('"'+result.url+'"'));var container=$('div.sharing-icons[data-url="'+url+'"]');if(container){$(".count-pt",container).text(result.count||0)}}function _gplusCallback(){gapi.client.setApiKey("AIzaSyCKSbrvQasunBoV16zDH9R33D88CeLr9gQ");if(window._gplus_url){var params={nolog:true,id:window._gplus_url,source:"widget",userId:"@viewer",groupId:"@self"};gapi.client.rpcRequest("pos.plusones.get","v1",params).execute(function(resp){var container=$('div.sharing-icons[data-url="'+window._gplus_url+'"]');if(container){$(".count-gp",container).text(resp.result.metadata.globalCounts.count||0);if(resp.result.metadata.globalCounts.count>0){$(".count-gp",container).after('<meta itemprop="interactionCount" content="GooglePlus:'+resp.result.metadata.globalCounts.count+'"/>')}window._gplus_url=null}})}}function loadFacebookLib(){if(typeof FB==="undefined"){window.fbAsyncInit=function(){FB.init({appId:window.facebookAppId,status:true,cookie:true,xfbml:true});FB.XFBML.parse();FB.Event.subscribe("edge.create",function(targetUrl){ga("send","social","facebook","like",targetUrl)});FB.Event.subscribe("message.send",function(targetUrl){ga("send","social","facebook","send",targetUrl)})};(function(){var e=document.createElement("script");e.async=true;e.src=document.location.protocol+"//connect.facebook.net/en_US/all.js";var sc=document.getElementsByTagName("script")[0];sc.parentNode.insertBefore(e,sc)})()}}function getQueryStringValue(name,url){var url=url||window.location.href;name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var regex=new RegExp("[\\?&]"+name+"=([^&#]*)");var results=regex.exec(url);return results==null?"":decodeURIComponent(results[1].replace(/\+/g," "))}window.urlParams={};function parseUrlParams(url){if(typeof url==="undefined"){query=window.location.search.substring(1)}else{query=url.substring(url.indexOf("?")+1)}var match,pl=/\+/g,search=/([^&=]+)=?([^&]*)/g,decode=function(s){return decodeURIComponent(s.replace(pl," "))};while(match=search.exec(query)){window.urlParams[decode(match[1])]=decode(match[2])}}var Device=new function(){this.isIOS=function(){return/iPhone|iPad|iPod/i.test(navigator.userAgent)};this.isAndroid=function(){return/Android/i.test(navigator.userAgent)};this.isMobile=function(){return/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase())}};jQuery.getCachedScript=function(url,callback){jQuery.ajax({dataType:"script",cache:true,url:url,success:callback})};$(document).ajaxError(function(event,jqxhr,settings,thrownError){try{result=JSON.parse(jqxhr.responseText);if(result.error==true){alert(result.message)}}catch(e){}});
function rateEntry(entryId,value,ctrl){var old_up_votes=parseInt($(".up-votes",ctrl.parent()).text().replace(/,/g,""));var old_down_votes=parseInt($(".down-votes",ctrl.parent()).text().replace(/,/g,""));$.post("/rate",{id:entryId,value:value},function(data){if(data&&data.status&&data.newValues){$(".up-votes",ctrl.parent()).text(data.newValues.up);$(".down-votes",ctrl.parent()).text(data.newValues.down);if(value==1&&old_up_votes==parseInt(data.newValues.up)){ctrl.toggleClass("active")}if(value==-1&&old_down_votes==parseInt(data.newValues.down)){ctrl.toggleClass("active")}}else{$(".up-votes",ctrl.parent()).text(old_up_votes);$(".down-votes",ctrl.parent()).text(old_down_votes);ctrl.toggleClass("active")}})}function updateLikeBox(type,ctrl,new_value){var current_votes=parseInt(ctrl.nextAll("."+type+":first").text().replace(/,/g,""));if(type=="down-votes"){current_votes*=-1}$("."+type,ctrl.parent()).text(Math.abs(current_votes+new_value));ctrl.toggleClass("active");if(type=="down-votes"){ctrl.attr("data-original-title",ctrl.hasClass("active")?trans.content_management.undislike:trans.content_management.dislike).tooltip("setContent")}else{ctrl.attr("data-original-title",ctrl.hasClass("active")?trans.content_management.unlike:trans.content_management.like).tooltip("setContent")}}function setupContentServices(){$(document).on("click","a.report-problem",function(ev){ev.preventDefault();var title=$(this).attr("title");var modal=createModalDialog("modal-dialog",title);var url=$(this).attr("href");$("#modal-dialog .modal-body").load(url,function(){$("#modal-dialog").modal("show");ajaxifyFormSubmit("#modal-dialog form")})});$(document).on("click","a.embed",function(ev){ev.preventDefault();var title=$(this).attr("title");$('<div id="modal-dialog" class="modal fade" tabindex="-1" role="dialog"></div>').appendTo("body");$("#modal-dialog").html(dialogHtml.replace("%title%",title));$("#modal-dialog .modal-body").append($(this).next().html());$("#modal-dialog").modal("show")})}function setupTags(){$LAB.script("/bundles/contentmanagement/js/jquery.tagsinput-1.3.6.min.js").wait(function(){$("#entry_tags").tagsInput({width:"100%",height:"30px",onAddTag:function(tag){var index=$('#entry_tags input[type="hidden"]').length;$("#entry_tags").append('<input type="hidden" name="entry[tags]['+index+']" value="'+tag+'" />')},onRemoveTag:function(tag){$('input[name^="entry[tags]"]').each(function(){if($(this).val()==tag){$(this).remove()}})}})})}
function SubmitCommentForm(form,callback){var submitBtn=$(form).find('button,input[type="submit"]').first();try{var submitBtnText=submitBtn.text();submitBtn.prop("disabled",true);var url=$(form).attr("action");var data=$(form).serialize();$.post(url,data).done(function(data){callback(form,data)})}catch(e){alert(e);submitBtn.prop("disabled",false);return false}return false}$(document).on("click",".comment-reply",function(){var $this=$(this);var replyUrl=$(this).data("href");ifLoggedIn(function(){if($this.closest("li.comment").next("li.loader").length){return}$this.closest("li.comment").after('<li class="comment loader"><img src="'+imgLoader+'"></li>');$.get(replyUrl,function(response){$this.closest("li.comment").after(response);$this.closest("li.comment").siblings("li.loader").remove()})});return false});$(document).on("click",".comment-vote-up, .comment-vote-down",function(){var url=$(this).data("href");var placeHolder=$(this).siblings("span.votes");$.get(url,null,"json").done(function(data){placeHolder.text(data.v)});return false});$(document).on("click",".comment-like, .comment-dislike",function(){var $this=$(this);var url=$this.data("href");ifLoggedIn(function(){$.get(url,null,"json").done(function(data){$this.siblings(".commets-likes-count").text(data.likes);$this.siblings(".commets-dislikes-count").text(data.dislikes)})});return false});$(document).on("click",".comment-abuse",function(){var url=$(this).data("href");var $this=$(this);ifLoggedIn(function(){$.get(url,null,"json").done(function(data){if(data.done==true||data.done==false)$this.hide("slow")})});return false});$(document).on("click",".comments-pages a",function(){var url=$(this).attr("href");$(this).closest(".comments-thread").load(url);return false});$(document).on("submit",".comment-form, .reply-form",function(e){e.preventDefault();var $this=$(this);var isReply=$(this).hasClass("reply-form");ifLoggedIn(function(){return SubmitCommentForm($this,function(form,data){var parentClass=isReply?"li.comment.reply":"li.add-comment";$formConainer=$(form).closest(parentClass);$formConainer.after($(data));$formConainer.remove();$(parentClass+" textarea").val("")})});return false});$(function(){$(".comments-thread").each(function(){var href=$(this).data("href");if(href){$(this).load(href)}})});$(document).on("click",".comment-report",function(){var $this=$(this);ifLoggedIn(function(){bootbox.dialog({title:trans.rawafedcomments.report_comment,message:'<textarea id="reportingCommentText" class="form-control" style="width:100%;height:100px;"></textarea>',buttons:{cancel:{label:trans.rawafedcomments.cancel,className:"btn-default"},send:{label:trans.rawafedcomments.send,className:"btn-primary",callback:function(){var comment=$("#reportingCommentText").val();if(""==comment){bootbox.alert(trans.rawafedcomments.you_must_write_report_comment,function(){$this.click()})}else{try{var url=$this.data("href");var data=$.param({comment:comment});$.post(url,data).done(function(data){if(data.error){bootbox.alert(data.message)}else{bootbox.alert(trans.rawafedcomments.your_report_has_been_sent)}})}catch(e){alert(e)}}}}}})});return false});
function displayModalBox(html){var content=$("<div>"+html+"</div>");var title=$(content.find(".modal-title").html());var body=$(content.find(".modal-body").html());bootbox.hideAll();bootbox.dialog({title:title.selector,message:body})}$(document).on("click",'[data-toggle="modal"]',function(){if(!$(this).data("url")){return}bootbox.hideAll();var $href=$(this).attr("data-url");bootbox.dialog({title:modalTitle,message:"<div class='align-center'><img src='"+imgLoader+"' /></div>"});$.get($href,function(data){var html=null;if(typeof data==="object"&&data.hasOwnProperty("html")){html=data.html}else{html=data}displayModalBox(html)}).fail(function(data){if(data.readyState==4&&data.status)displayModalBox(data.responseText)})});$(document).on("click",".modal-backdrop",function(){bootbox.hideAll()});$(document).on("submit",'form[data-submittype="modal-ajax"]',function(event){event.preventDefault();var formData=$(this).serializeArray();if($(this).find('input[type="submit"],button[type="submit"]').length==1){var btn=$(this).find('input[type="submit"],button[type="submit"]');formData.push({name:btn.prop("name"),value:btn.prop("value")})}var action=$(this).attr("action");var $this=$(this);if(!$("#bootboxLoader").length)$(this).before("<div id='bootboxLoader' class='align-center'><img src='"+imgLoader+"' /></div>");$.post(action,formData,function(data){$this.hide().prev("#bootboxLoader").show();if(typeof data==="object"){if(data.hasOwnProperty("success")){bootbox.hideAll();bootbox.alert(data.message)}if(data.hasOwnProperty("html")){var html=data.html;displayModalBox(html)}}else{var html=data;displayModalBox(html)}})});$(document).on("change",'[data-change="modal-form-refresh"]',function(){event.preventDefault();var form=$(this).closest("form");var formData=$(form).serialize();var action=$(form).attr("action");var $this=$(this);if(!$("#bootboxLoader").length)$(this).before("<div id='bootboxLoader' class='align-center'><img src='"+imgLoader+"' /></div>");$.get(action,formData,function(data){$this.hide().prev("#bootboxLoader").show();if(typeof data==="object"&&data.hasOwnProperty("html")){html=data.html}else{html=data}displayModalBox(html)})});
$.fn.extend({changeBootstrapDropdownMenu:function(){$(this).closest(".dropdown-menu").siblings('[data-toggle="dropdown"]:first').html($(this).html())}});$(document).on("click",'.dropdown-menu > li > input[type="radio"] ~ label',function(){$(this).changeBootstrapDropdownMenu()});
(function($){$.fn.unveil=function(threshold,callback){var $w=$(window),th=threshold||0,retina=window.devicePixelRatio>1,attrib=retina?"data-src-retina":"data-src",images=this,loaded;this.one("unveil",function(){var source=this.getAttribute(attrib);source=source||this.getAttribute("data-src");if(source){this.setAttribute("src",source);if(typeof callback==="function")callback.call(this)}});function unveil(){var inview=images.filter(function(){var $e=$(this),wt=$w.scrollTop(),wb=wt+$w.height(),et=$e.offset().top,eb=et+$e.height();return eb>=wt-th&&et<=wb+th});loaded=inview.trigger("unveil");images=images.not(loaded)}$w.scroll($.throttle(50,unveil));$w.resize(unveil);unveil();return this}})(window.jQuery||window.Zepto);!function(a,b){"use strict";!function(b){"function"==typeof define&&define.amd?define(["jquery"],b):b("object"==typeof exports?require("jquery"):a.jQuery||a.Zepto)}(function(c){var d=this||{},e="",f=0,g=0,h=0,i=".adunit",j=!1,k=!1,l="googleAdUnit",m=function(a,b,g){var i;f=0,h=0,e=a,i=c(b),d.shouldCheckForAdBlockers=function(){return g?"function"==typeof g.afterAdBlocked:!1},u(g,i).then(function(){g=n(g),d.dfpOptions=g,c(function(){o(g,i),p(g,i)})})},n=function(d){var e={setTargeting:{},setCategoryExclusion:"",setLocation:"",enableSingleRequest:!0,collapseEmptyDivs:"original",refreshExisting:!0,disablePublisherConsole:!1,disableInitialLoad:!1,setCentering:!1,noFetch:!1,namespace:b,sizeMapping:{}};if("undefined"==typeof d.setUrlTargeting||d.setUrlTargeting){var f=q(d.url);c.extend(!0,e.setTargeting,{UrlHost:f.Host,UrlPath:f.Path,UrlQuery:f.Query})}return c.extend(!0,e,d),e.googletag&&a.googletag.cmd.push(function(){c.extend(!0,a.googletag,e.googletag)}),e},o=function(b,g){var i=a.googletag;g.each(function(){var a=c(this);f++;var d=s(a,b),g=r(a,d),h=t(a);a.data("existingContent",a.html()),a.html("").addClass("display-none"),i.cmd.push(function(){var f,j=a.data(l);if(j)f=j;else{var k;k=""===e?d:"/"+e+"/"+d,a.data("outofpage")?f=i.defineOutOfPageSlot(k,g):(f=i.defineSlot(k,h,g),a.data("companion")&&(f=f.addService(i.companionAds()))),f=f.addService(i.pubads())}var m=a.data("targeting");m&&c.each(m,function(a,b){f.setTargeting(a,b)});var n=a.data("exclusions");if(n){var o,p=n.split(",");c.each(p,function(a,b){o=c.trim(b),o.length>0&&f.setCategoryExclusion(o)})}var q=a.data("size-mapping");if(q&&b.sizeMapping[q]){var r=i.sizeMapping();c.each(b.sizeMapping[q],function(a,b){r.addSize(b.browser,b.ad_sizes)}),f.defineSizeMapping(r.build())}a.data(l,f),"function"==typeof b.beforeEachAdLoaded&&b.beforeEachAdLoaded.call(this,a)})}),i.cmd.push(function(){var a=i.pubads();b.enableSingleRequest&&a.enableSingleRequest(),c.each(b.setTargeting,function(b,c){a.setTargeting(b,c)});var e=b.setLocation;if("object"==typeof e&&("number"==typeof e.latitude&&"number"==typeof e.longitude&&"number"==typeof e.precision?a.setLocation(e.latitude,e.longitude,e.precision):"number"==typeof e.latitude&&"number"==typeof e.longitude&&a.setLocation(e.latitude,e.longitude)),b.setCategoryExclusion.length>0){var j,k=b.setCategoryExclusion.split(",");c.each(k,function(b,d){j=c.trim(d),j.length>0&&a.setCategoryExclusion(j)})}b.collapseEmptyDivs&&a.collapseEmptyDivs(),b.disablePublisherConsole&&a.disablePublisherConsole(),b.companionAds&&(i.companionAds().setRefreshUnfilledSlots(!0),b.disableInitialLoad||a.enableVideoAds()),b.disableInitialLoad&&a.disableInitialLoad(),b.noFetch&&a.noFetch(),b.setCentering&&a.setCentering(!0),a.addEventListener("slotRenderEnded",function(a){h++;var d=c("#"+a.slot.getSlotId().getDomId()),e=a.isEmpty?"none":"block",i=d.data("existingContent");"none"===e&&c.trim(i).length>0&&"original"===b.collapseEmptyDivs&&(d.show().html(i),e="block display-original"),d.removeClass("display-none").addClass("display-"+e),"function"==typeof b.afterEachAdLoaded&&b.afterEachAdLoaded.call(this,d,a),"function"==typeof b.afterAllAdsLoaded&&h===f&&b.afterAllAdsLoaded.call(this,g)}),d.shouldCheckForAdBlockers()&&!i._adBlocked_&&setTimeout(function(){var e=a.getSlots?a.getSlots():[];e.length>0&&c.get(e[0].getContentUrl()).always(function(a){200!==a.status&&c.each(e,function(){var a=c("#"+this.getSlotId().getDomId());b.afterAdBlocked.call(d,a,this)})})},0),i.enableServices()})},p=function(b,e){var f=a.googletag;if(d.shouldCheckForAdBlockers()&&!f._adBlocked_&&f.getVersion){var g="//partner.googleadservices.com/gpt/pubads_impl_"+f.getVersion()+".js";c.getScript(g).always(function(a){a&&"error"===a.statusText&&c.each(e,function(){b.afterAdBlocked.call(d,c(this))})})}e.each(function(){var a=c(this),e=a.data(l);f._adBlocked_&&d.shouldCheckForAdBlockers()&&b.afterAdBlocked.call(d,a),f.cmd.push(b.refreshExisting&&e&&a.hasClass("display-block")?function(){f.pubads().refresh([e])}:function(){f.display(a.attr("id"))})})},q=function(b){var c=(b||a.location.toString()).match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/),d=c[4]||"",e=(c[5]||"").replace(/(.)\/$/,"$1"),f=c[7]||"",g=f.replace(/\=/gi,":").split("&");return{Host:d,Path:e,Query:g}},r=function(a,b){return g++,a.attr("id")||a.attr("id",b.replace(/[^A-z0-9]/g,"_")+"-auto-gen-id-"+g).attr("id")},s=function(a,b){var c=a.data("adunit")||b.namespace||a.attr("id")||"";return"function"==typeof b.alterAdUnitName&&(c=b.alterAdUnitName.call(this,c,a)),c},t=function(a){var b=[],d=a.data("dimensions");if(d){var e=d.split(",");c.each(e,function(a,c){var d=c.split("x");b.push([parseInt(d[0],10),parseInt(d[1],10)])})}else b.push([a.width(),a.height()]);return b},u=function(b,e){function f(){d.shouldCheckForAdBlockers()&&c.each(e,function(){b.afterAdBlocked.call(d,c(this))})}if(k=k||c('script[src*="googletagservices.com/tag/js/gpt.js"]').length)return j&&f(),c.Deferred().resolve();var g=c.Deferred();a.googletag=a.googletag||{},a.googletag.cmd=a.googletag.cmd||[];var h=document.createElement("script");h.async=!0,h.type="text/javascript",h.onerror=function(){v(),g.resolve(),j=!0,f()},h.onload=function(){googletag._loadStarted_||(googletag._adBlocked_=!0,f()),g.resolve()};var i="https:"===document.location.protocol;h.src=(i?"https:":"http:")+"//www.googletagservices.com/tag/js/gpt.js";var l=document.getElementsByTagName("script")[0];return l.parentNode.insertBefore(h,l),"none"===h.style.display&&v(),g},v=function(){var b=a.googletag,e=b.cmd,f=function(a,c,d,e){return b.ads.push(d),b.ads[d]={renderEnded:function(){},addService:function(){return this}},b.ads[d]};b={cmd:{push:function(a){a.call(d)}},ads:[],pubads:function(){return this},noFetch:function(){return this},disableInitialLoad:function(){return this},disablePublisherConsole:function(){return this},enableSingleRequest:function(){return this},setTargeting:function(){return this},collapseEmptyDivs:function(){return this},enableServices:function(){return this},defineSlot:function(a,b,c){return f(a,b,c,!1)},defineOutOfPageSlot:function(a,b){return f(a,[],b,!0)},display:function(a){return b.ads[a].renderEnded.call(d),this}},c.each(e,function(a,c){b.cmd.push(c)})};c.dfp=c.fn.dfp=function(a,c){c=c||{},a===b&&(a=e),"object"==typeof a&&(c=a,a=c.dfpID||e);var d=this;return"function"==typeof this&&(d=i),m(a,d,c),this}})}(window);(function(e){e.fn.extend({slimScroll:function(g){var a=e.extend({width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},g);this.each(function(){function v(d){if(r){d=d||window.event;var c=0;d.wheelDelta&&(c=-d.wheelDelta/120);d.detail&&(c=d.detail/3);e(d.target||d.srcTarget||d.srcElement).closest("."+a.wrapperClass).is(b.parent())&&m(c,!0);d.preventDefault&&!k&&d.preventDefault();k||(d.returnValue=!1)}}function m(d,e,g){k=!1;var f=d,h=b.outerHeight()-c.outerHeight();e&&(f=parseInt(c.css("top"))+d*parseInt(a.wheelStep)/100*c.outerHeight(),f=Math.min(Math.max(f,0),h),f=0<d?Math.ceil(f):Math.floor(f),c.css({top:f+"px"}));l=parseInt(c.css("top"))/(b.outerHeight()-c.outerHeight());f=l*(b[0].scrollHeight-b.outerHeight());g&&(f=d,d=f/b[0].scrollHeight*b.outerHeight(),d=Math.min(Math.max(d,0),h),c.css({top:d+"px"}));b.scrollTop(f);b.trigger("slimscrolling",~~f);w();p()}function x(){u=Math.max(b.outerHeight()/b[0].scrollHeight*b.outerHeight(),30);c.css({height:u+"px"});var a=u==b.outerHeight()?"none":"block";c.css({display:a})}function w(){x();clearTimeout(B);l==~~l?(k=a.allowPageScroll,C!=l&&b.trigger("slimscroll",0==~~l?"top":"bottom")):k=!1;C=l;u>=b.outerHeight()?k=!0:(c.stop(!0,!0).fadeIn("fast"),a.railVisible&&h.stop(!0,!0).fadeIn("fast"))}function p(){a.alwaysVisible||(B=setTimeout(function(){a.disableFadeOut&&r||y||z||(c.fadeOut("slow"),h.fadeOut("slow"))},1e3))}var r,y,z,B,A,u,l,C,k=!1,b=e(this);if(b.parent().hasClass(a.wrapperClass)){var n=b.scrollTop(),c=b.closest("."+a.barClass),h=b.closest("."+a.railClass);x();if(e.isPlainObject(g)){if("height"in g&&"auto"==g.height){b.parent().css("height","auto");b.css("height","auto");var q=b.parent().parent().height();b.parent().css("height",q);b.css("height",q)}if("scrollTo"in g)n=parseInt(a.scrollTo);else if("scrollBy"in g)n+=parseInt(a.scrollBy);else if("destroy"in g){c.remove();h.remove();b.unwrap();return}m(n,!1,!0)}}else if(!(e.isPlainObject(g)&&"destroy"in g)){a.height="auto"==a.height?b.parent().height():a.height;n=e("<div></div>").addClass(a.wrapperClass).css({position:"relative",overflow:"hidden",width:a.width,height:a.height});b.css({overflow:"hidden",width:a.width,height:a.height});var h=e("<div></div>").addClass(a.railClass).css({width:a.size,height:"100%",position:"absolute",top:0,display:a.alwaysVisible&&a.railVisible?"block":"none","border-radius":a.railBorderRadius,background:a.railColor,opacity:a.railOpacity,zIndex:90}),c=e("<div></div>").addClass(a.barClass).css({background:a.color,width:a.size,position:"absolute",top:0,opacity:a.opacity,display:a.alwaysVisible?"block":"none","border-radius":a.borderRadius,BorderRadius:a.borderRadius,MozBorderRadius:a.borderRadius,WebkitBorderRadius:a.borderRadius,zIndex:99}),q="right"==a.position?{right:a.distance}:{left:a.distance};h.css(q);c.css(q);b.wrap(n);b.parent().append(c);b.parent().append(h);a.railDraggable&&c.on("mousedown",function(a){var b=e(document);z=!0;t=parseFloat(c.css("top"));pageY=a.pageY;b.on("mousemove.slimscroll",function(a){currTop=t+a.pageY-pageY;c.css("top",currTop);m(0,c.position().top,!1)});b.on("mouseup.slimscroll",function(a){z=!1;p();b.off(".slimscroll")});return!1}).on("selectstart.slimscroll",function(a){a.stopPropagation();a.preventDefault();return!1});h.hover(function(){w()},function(){p()});c.hover(function(){y=!0},function(){y=!1});b.hover(function(){r=!0;w();p()},function(){r=!1;p()});b.on("touchstart",function(a,b){a.originalEvent.touches.length&&(A=a.originalEvent.touches[0].pageY)});b.on("touchmove",function(b){k||b.originalEvent.preventDefault();b.originalEvent.touches.length&&(m((A-b.originalEvent.touches[0].pageY)/a.touchScrollStep,!0),A=b.originalEvent.touches[0].pageY)});x();"bottom"===a.start?(c.css({top:b.outerHeight()-c.outerHeight()}),m(0,!0)):"top"!==a.start&&(m(e(a.start).position().top,null,!0),a.alwaysVisible||c.hide());window.addEventListener?(this.addEventListener("DOMMouseScroll",v,!1),this.addEventListener("mousewheel",v,!1)):document.attachEvent("onmousewheel",v)}});return this}});e.fn.extend({slimscroll:e.fn.slimScroll})})(jQuery);function prepareAdsZones(mq){if(mq.matches){$(".ads_wrap .ad_l").remove()}else{$(".ads_wrap").each(function(){if($(".ad_r",$(this)).length>0&&$(".ad_l",$(this)).length==0){$(this).append('<div class="ads-box-300x250 ad_l"><div class="adunit" data-adunit="AR_300x250_WTM_middleL_allpages" data-dimensions="300x250" itemscope itemtype="http://schema.org/WPAdBlock"></div></div>')}})}}function setupLayout(){var showByHover=false;function prepareMenus(mq){if(!mq.matches){var _container=$('.list-wpr > div[class="col-sm-12"]').eq(0);$($("#side-blocks-wpr > div.iw-panel").get().reverse()).each(function(){var sideIndex=$(this).index();var after=$(this).data("after");$(this).addClass("side-block");if(after==0){$(this).prependTo(_container)}else if(isNaN(after)){$(this).appendTo(_container)}else{$("div.iw-panel:has(.list-item)",_container).eq(after-1).after($(this))}})}else{$("div.iw-panel.side-block").appendTo($("#side-blocks-wpr")).removeClass("side-block")}}var xsMediaQuery=window.matchMedia("(min-width: 1200px)");xsMediaQuery.addListener(prepareMenus);prepareMenus(xsMediaQuery);var _mediaQuery=window.matchMedia("(max-width: 640px)");_mediaQuery.addListener(prepareAdsZones);var _Timer=0;$(window).scroll($.throttle(50,function(){clearTimeout(_Timer);$("body").removeClass("hover");_Timer=setTimeout(function(){$("body").addClass("hover")},500)}));if($("#country-selector").length){$("#country-selector").on("show.bs.dropdown",function(ev){$('<div class="loader" id="media-spinner">Loading...</div>').appendTo("#country-selector li.all-countries");$.get("/countries-list").done(function(html){$("#country-selector li.all-countries").html(html);$("#country-selector ul.scrollable-area").slimScroll({railVisible:true,size:"4px",color:"#28b6f6",height:$(this).data("height"),position:$("body").hasClass("rtl")?"left":"right"})})});$(document).on("click","#country-selector li a",function(ev){ev.preventDefault();document.location.href=BaseUrl+"/?tab=h&__country="+$(this).data("id")});$("#country-filter").click(function(ev){ev.stopPropagation()});$("#country-filter").keyup(function(ev){value=$(this).val();if(value){$('#country-selector .all-countries li:contains("'+value+'")').show();$('#country-selector .all-countries li:not(:contains("'+value+'"))').hide()}else{$("#country-selector .all-countries li").show()}})}}function setupAds(){prepareAdsZones(window.matchMedia("(max-width: 640px)"));$('.adunit:not(".display-block")').dfp({dfpID:trans.islamway.dfp_id,enableSingleRequest:false,afterEachAdLoaded:function(ad){},sizeMapping:{"top-left-ads":[{browser:[0,0],ad_sizes:[320,100]},{browser:[768,0],ad_sizes:[728,90]}],"top-right-ads":[{browser:[1200,0],ad_sizes:[200,90]},{browser:[0,0],ad_sizes:[]}]}})}function showHints(){var elements=[];var intro_id;var stored_intro_ids=Storage.get("intro_ids");var push_element=true;if(stored_intro_ids){stored_intro_ids=JSON.parse(stored_intro_ids)}else{stored_intro_ids=[]}$("[data-intro-text]").each(function(index,el){intro_id=$(el).data("intro-id");if(stored_intro_ids instanceof Array){if($.inArray(intro_id,stored_intro_ids)>-1){push_element=false}else{push_element=true}}if(push_element){stored_intro_ids.push(intro_id);elements.push({element:el,intro:$(el).data("intro-text"),position:$(el).data("position")})}});if(stored_intro_ids.length){Storage.set("intro_ids",JSON.stringify(stored_intro_ids))}if(elements.length){$.getCachedScript(CDN_HOST+"/bundles/islamway/js/intro.min.js",function(){introJs().setOptions({skipLabel:trans.islamway.skip,nextLabel:trans.islamway.next,prevLabel:trans.islamway.prev,doneLabel:trans.islamway.end}).addSteps(elements).start()})}$(document).on("click",".user-menu ul.dropdown-menu li a.help",function(ev){ev.preventDefault();var elements=[];$("[data-intro-text]").each(function(index,el){elements.push({element:el,intro:$(el).data("intro-text"),position:$(el).data("position")})});if(typeof introJs!=="undefined"){introJs().addSteps(elements).start()}else{$.getCachedScript(CDN_HOST+"/bundles/islamway/js/intro.min.js",function(){introJs().addSteps(elements).start()})}})}function setupSearchControls(){$(".less-more-btn").click(function(){$(this).parent().parent().find(".show-hide-row").slideToggle("slow");$(this).children().toggleClass("chevron-up").toggleClass("chevron-down")});if($("#author-finder").length){$("#author-finder").on("input",function(){if($(this).val()==""){$('.search-options input[name="scholar"]').val("");$("#sections-search").submit()}});$.getCachedScript(CDN_HOST+"/bundles/islamway/js/typeahead-4.0.0.min.js",function(){$("#author-finder").typeahead({hint:true,highlight:true,minLength:1,matcher:function(item){return true},source:function(query,process){$.get("/scholar-names?type="+$('.search-options input[name="type"]').val()+"&contains="+query,function(data){states=[];map={};$.each(data,function(i,state){map[state.label]=state;states.push(state.label)});process(states)})},updater:function(item){value=map[item].value;$('.search-options input[name="scholar"]').val(value);$("#sections-search").submit();return item}})})}$('input[name="high_quality"]').click(function(){$("#sections-search").submit()});$(".dropdown-render-as-select").on("click","li label span",function(){var selected=$(this).text();$(this).closest(".dropdown-render-as-select").find(".dropdown_title").html(selected)});parseUrlParams();$("#author-finder").val(window.urlParams["scholar-name"]);$('.search-options input[name="scholar"]').val(window.urlParams["scholar"]);$('#sections-search input[name="q"]').val(window.urlParams["q"]);if(Object.keys(window.urlParams).length>1){$('.search-options input[type="checkbox"], .search-options input[type="radio"]').each(function(){name=$(this).attr("name");if(name in window.urlParams&&$(this).val()==window.urlParams[name]){$(this).prop("checked",true)}})}if($('input[name="ep_chapter"]:checked').length==0){$("#all-chapters").prop("checked",true)}$(".dropdown-render-as-select").each(function(){var selectedOption=$("input:checked",this);if(selectedOption.length){$(".dropdown_title",this).text(selectedOption.next().text())}});$("#all-chapters").click(function(){$('input[name="ep_chapter"]').prop("checked",false);$("#sections-search").submit()});$('input[name="ep_chapter"]').click(function(){$('input[name="ep_chapter"]').not('[value="'+$(this).val()+'"]').prop("checked",false);$("#all-chapters").prop("checked",$('input[name="ep_chapter"]:checked').length==0);$("#sections-search").submit()});$(".dropdown-render-as-select input").click(function(){var container=$(this).closest(".dropdown-render-as-select");$("input",container).not(this).prop("checked",false);$("#sections-search").submit()});$("#sections-search").submit(function(ev){ev.preventDefault();var _form=$(this);var url=window.location.href;var baseUrl=url.split("?")[0];parseUrlParams(_form.serialize());var _urlParams=window.urlParams;if(typeof _urlParams==="object"){for(key in _urlParams){if(!_urlParams[key]){delete _urlParams[key]}}}var _queryString=$.param(_urlParams);if(baseUrl+"?"+_queryString==window.location.href){return}$('<div class="loader" id="media-spinner">Loading...</div>').appendTo("#sections-search");$("div.no-entries").parent().remove();$.get(baseUrl,_queryString,function(data){$('.list-wpr > div[class="col-sm-12"]').remove();$(".list-wpr").append(data);$("img.veiled").unveil(200);if(history&&history.pushState){parseUrlParams();history.pushState(window.urlParams,document.title,baseUrl+"?"+_queryString)}$("#media-spinner").remove()})})}function setupEntryControls(entrySelector){showSharingIcons($(".sharing-icons").first());$(document).on("click",".act",function(ev){ev.preventDefault();var rated_value;var entryId=$(this).closest(entrySelector).data("id");if($(this).hasClass("icon-like")){rateEntry(entryId,1,$(this));rated_value=$(this).hasClass("active")?-1:1;updateLikeBox("up-votes",$(this),rated_value);var dislike_ico=$(this).parent().next().children(".icon-dislike");if(dislike_ico.hasClass("active")){updateLikeBox("down-votes",dislike_ico,1)}}else if($(this).hasClass("icon-dislike")){rateEntry(entryId,-1,$(this));rated_value=$(this).hasClass("active")?1:-1;updateLikeBox("down-votes",$(this),rated_value);var like_ico=$(this).parent().prev().children(".icon-like");if(like_ico.hasClass("active")){updateLikeBox("up-votes",like_ico,-1)}}else if($(this).hasClass("share-ctr")){sharingIcons=$(this).parent().find(".sharing-icons");if(sharingIcons.length){if(!sharingIcons.children().length){showSharingIcons($(this).next())}$('a > span[class^="icon-"]',$(this).next()).each(function(){$(this).attr("class",$(this).attr("class").replace("-rounded",""))});if($("span",$(this)).length){$("span",$(this)).toggle()}else{$(this).parent().css("border-width",$(this).next().is(":visible")?"0":"1px")}$(this).next().toggle();$(this).parent().css("width",$(this).next().is(":visible")?50+$(this).width()+$(this).next().width():"auto")}}else if($(this).hasClass("bookmark")){addBookmark(entryId)}else if($(this).hasClass("follow")){var url=$(this).data("href");$.ajax({url:url,type:"POST",dataType:"json",data:{}}).done(function(json){})}else if($(this).hasClass("unfollow")){}else if($(this).hasClass("edit")){}else if($(this).hasClass("hide")){}else if($(this).hasClass("favourite")){addEntryToFavourites(entryId)}else if($(this).hasClass("report")){ev.preventDefault();var title=$(this).attr("title");var modal=createModalDialog("modal-dialog",title);var url=$(this).attr("href");$("#modal-dialog .modal-body").load(url,function(){$("#modal-dialog").modal("show");ajaxifyFormSubmit("#modal-dialog form")})}});$(document).on("click","div.sharing-icons.vertical a",function(ev){$(this).parent().hide()});$(document).on("click","a.share-rn",function(ev){ev.preventDefault();ev.stopPropagation();var _this=$(this);ifLoggedIn(function(){entryId=_this.closest(entrySelector).data("id");$("#shared-entry").val(entryId);$("#share-dialog").modal("show")})});$("#share-btn").click(function(){$.post(BaseUrl+"/share",{id:$("#shared-entry").val(),audience:$("#share-dialog").find("#micropost-audience").val(),text:$("#sharing-text").val()},function(data){if(data&&data.status){alert(trans.islamway.entry_shared_successfully);$("#share-dialog").modal("hide")}else{alert(trans.islamway.an_error_occurred_while_trying_to_shared_entry)}})})}function downloadCollection(id,highQuality){ifLoggedIn(function(){var url="http://download.quran.islamway.net/archives/"+id+(highQuality?"-hi":"")+".zip";location.href=url;ga("send","event","Collection","Archive-Download",id+(highQuality?"-hi":""))})}function setupCollectionControls(){$(document).on("click",".list-item a.collection-show-items",function(ev){ev.stopPropagation();if($(this).prev().hasClass("collection-items")){$(this).prev().addClass("scrollable-area");$(this).prev().slimScroll({railVisible:true,size:"4px",color:"#28b6f6",height:$(this).data("height"),position:$("body").hasClass("rtl")?"left":"right"})}var listItem=$(this).closest(".list-item");var listGroup=$("ul.list-group",listItem);var collectionId=listGroup.data("cid");var lastEntry=$("li:last-child",listGroup);$.get(BaseUrl+"/_cfragment/"+collectionId,{"entry-id":lastEntry.data("id"),"view-order":lastEntry.data("view-order")},function(html){listGroup.append(html);var wpr=listGroup.parent();if(wpr.data("height")<280){wpr.data("height",280);wpr.css("height","280px");wpr.parent().css("height","280px")}})});$(document).on("click","li.collection-item button",function(ev){ev.stopPropagation();var listItem=$(this).closest(".list-item");var fragmentWpr=$(".fragment-wpr",listItem);var currentItem=$(this).closest("li.collection-item");var entryId=currentItem.data("id");if($("i.icon-play",$(this)).length){if(entryId!=listItem.data("id")){if($(".jwplayer",fragmentWpr).length){jwplayer("player-"+listItem.data("id")).stop()}fragmentWpr.load(BaseUrl+"/_efragment/"+entryId,function(){listItem.data("id",entryId);var placeholder=$(".mp3-player, .mp4-player",fragmentWpr);if(placeholder.length){displayMediaPlayer(placeholder)}})}else{jwplayer("player-"+entryId).play()}}else{jwplayer("player-"+entryId).pause()}})}function setupMediaPlayer(){$(document).on("click",".mp3-player, .mp4-player",function(ev){ev.stopPropagation();ga("send","event","Play-FromList");if(Device.isMobile()&&!CONFIG.UsePlayerOnMobile){window.location=$(this).data("media")}else{displayMediaPlayer($(this))}})}function displayMediaPlayer(_placeholder){if(typeof jwplayer==="undefined"){$LAB.script(CDN_HOST+"/bundles/viewers/jwplayer-"+CONFIG.jwplayerVersion+"/jwplayer.js").wait(function(){if(typeof CONFIG.jwplayerKey!=="undefined"&&CONFIG.jwplayerKey){jwplayer.key=CONFIG.jwplayerKey}window.onbeforeunload=function(){$(".jwplayer").each(function(){jwplayer($(this).attr("id")).stop()})};doDisplayPlayer()})}else{doDisplayPlayer()}function doDisplayPlayer(){var listItem=_placeholder.closest(".list-item");var fragmentWpr=$(".fragment-wpr",listItem);$('<div class="loader inline-loader"></div>').appendTo(fragmentWpr);var _width=_placeholder.width();var _height=_placeholder.height();var _id="player-"+_placeholder.data("id");pauseAllPlayers(_id);var _options={skin:"stormtrooper",stretching:"exactfit",width:"100%"};_options["file"]=_placeholder.data("media");_options["image"]=$("img",_placeholder).attr("src");if(_placeholder.hasClass("mp3-player")){_options["height"]=30}else{_options["aspectratio"]="16:9"}$("#player-wpr").css({width:_width,height:_height});$("#player-wpr").append('<div id="'+_id+'" class="player" />');var playerInstance=jwplayer(_id);playerInstance.setup(_options);playerInstance.on("ready",function(){playerInstance.on("play",function(){pauseAllPlayers(_id);$("li.collection-item i",listItem).removeClass("icon-pause").addClass("icon-play");$('li.collection-item[data-id="'+listItem.data("id")+'"] i',listItem).removeClass("icon-play").addClass("icon-pause")});playerInstance.on("pause",function(){$('li.collection-item[data-id="'+listItem.data("id")+'"] i',listItem).removeClass("icon-pause").addClass("icon-play")});playerInstance.on("complete",function(){$('li.collection-item[data-id="'+listItem.data("id")+'"] i',listItem).removeClass("icon-pause").addClass("icon-play");var nextEntry=$('li.collection-item[data-id="'+listItem.data("id")+'"]',listItem).next();if(nextEntry.length){$("button",nextEntry).click()}});setTimeout(function(){$("#"+_id).insertAfter(_placeholder);_placeholder.hide();playerInstance.play();$(".inline-loader",fragmentWpr).remove();$("#media-spinner").remove()},100)})}}function pauseAllPlayers(excludedId){$(".jwplayer").each(function(){var playerId=$(this).attr("id");if(playerId!==excludedId){var instance=jwplayer(playerId);var state=instance.getState();if(state=="playing"||state=="buffering"){instance.pause(true)}}})}function setupContentList(){if($("#micropost-text").length){$.getCachedScript(CDN_HOST+"/bundles/islamway/js/emojionearea.min.js",function(){var mp=$("#micropost-text").emojioneArea({attributes:{dir:$("body").hasClass("rtl")?"rtl":"ltr"},useSprite:true,events:{focus:function(editor,event){$("#formAddMicroBlog").addClass("focused")},blur:function(editor,event){$("#formAddMicroBlog").removeClass("focused")}}})})}var postingNewMicroBlog=false;$("#formAddMicroBlog").submit(function(e){e.preventDefault();var url=$(this).attr("action");var formData=$(this).serialize();if(!postingNewMicroBlog&&$("#micropost-text").val()){$('<div class="loader" id="media-spinner">Loading...</div>').appendTo(".microblog_inner");var _this=$(this);postingNewMicroBlog=true;$(this).find(":input").each(function(){$(this).prop("disabled",true)});$.ajax({url:url,type:"POST",dataType:"json",data:formData}).done(function(json){if(json.error){bootbox.alert(json.message)}else{$("#micropost-text")[0].emojioneArea.setText("");_this.parent().after('<div class="iw-panel">'+json.html+"</div>");$("img.avatar.veiled").unveil(200)}}).fail(function(){}).always(function(){postingNewMicroBlog=false;$("#media-spinner").remove();_this.find(":input").each(function(){$(this).prop("disabled",false)})})}});$("#micropost-text").keyup(function(){$(this).css("height","30px");$(this).css("height",$(this).prop("scrollHeight")+"px")});$(document).on("click",".act.edit",function(){var $this=$(this);var container=$this.closest(".list-item.entry");var id=container.data("id");var data={id:id};var formId="edit-post-"+id;var editFormContainer=$("#"+formId).length?$("#"+formId):container.find(".text:first").after($('<div class="post-edit-form '+($this.hasClass("edit-share")?"edit-share-form":"")+'" id="'+formId+'"><img style="margin: auto;" align="center" src="'+imgLoader+'"></div>')).next();$.get(BaseUrl+"/edit-post",data,function(result){var editForm=$(result.html);$(editForm).submit(function(e){$form=$(this);$form.find("button").prop("disabled",true);e.preventDefault();data=$form.serialize();$.post(BaseUrl+"/edit-post?id="+id,data,function(result){if(result.error){bootbox.alert(result.message);$form.find("button").prop("disabled",false)}else{$(container).find(".fragment-wpr").html($(result.html).find(".fragment-wpr"));$form.find("button").prop("disabled",true)}})}).find('[id="form_cancel"]').click(function(){$(editFormContainer).prev(".text").show();$(editFormContainer).remove()});$(editFormContainer).html(editForm)})});$(document).on("click",".act.delete",function(){var $this=$(this);bootbox.confirm(trans.islamway.post_delete_confirm_message,function(result){var action=$this.data("action");var data={id:$this.closest(".list-item.entry").data("id")};$.post(action,data,function(data){if(data.error==false){$this.closest(".iw-panel").remove()}else{alert(data.message)}})})});$("#reporting-btn").click(function(){$("#reporting-btn, #reporting-text").prop("disabled",true);$.post(BaseUrl+"/social/report-post",{id:$("#reported-entry").val(),text:$("#reporting-text").val()},function(data){if(data&&!data.error){alert(trans.islamway.post_reported_successfully);$("#reporting-dialog").modal("hide");$("#reporting-text").val("")}else{alert(data.message)}}).always(function(){$("#reporting-btn, #reporting-text").prop("disabled",false)})});$("img.veiled").unveil(200);setupEntryControls(".list-item");setupCollectionControls();setupPaging()}function setupPaging(){if($("#pager-wpr").length){var pagerHtml="";setupUnlimitedScroll(function(){pagerHtml=$("#pager-wpr").html();$("#pager-wpr").remove();return null},function(items){if(items.length){var container=$('.list-wpr > div[class="col-sm-12"]');if(typeof items=="string"){container.append(items)}else if(typeof items=="object"){for(var n=0;n<items.length;n++){if(n==0){container.append('<a id="page-'+(1+$(".page-anchor").length)+'" class="page-anchor"></a>')}container.append($('<div class="iw-panel"></div>').html(items[n]))}if(!$("#pager-wpr").length){container.append('<div id="pager-wpr" class="iw-panel"></div>')}var lastItem=$(".list-item[data-id]",container).last();$("#pager-wpr").html(pagerHtml.replace(/page=[0-9]+/,"page="+(1+$(".page-anchor").length)).replace(/lid=[^\"]+/,"lid="+lastItem.data("id")+"&lrank="+lastItem.data("rank")))}$("img.veiled").unveil(200);setupAds()}})}}function ifLoggedIn(callback){$.getJSON(BaseUrl+"/login-status",function(data){if(data.status){callback()}else{$('.membership-btns a.btn[data-url*="login"]').click()}})}function addBookmark(entryId,onSuccess){ifLoggedIn(function(){$.post(BaseUrl+"/add-bookmark",{id:entryId},function(data){if(data&&data.status){if(arguments.length>1&&onSuccess&&$.isFunction(onSuccess)){onSuccess()}else{alert("Bookmark Saved")}}else{alert("An error occurred while trying to add bookmark.")}})})}function deleteBookmark(entryId,onSuccess){ifLoggedIn(function(){$.post(BaseUrl+"/delete-bookmark",{id:entryId},function(data){if(data&&data.status){if(arguments.length>1&&onSuccess&&$.isFunction(onSuccess)){onSuccess()}else{alert("Bookmark Deleted")}}else{alert("An error occurred while trying to delete bookmark.")}})})}function addEntryToFavourites(entryId,onSuccess){ifLoggedIn(function(){$.post(BaseUrl+"/add-to-favs",{id:entryId},function(data){if(data&&data.status){if(arguments.length>1&&onSuccess&&$.isFunction(onSuccess)){onSuccess()}else{alert("Entry added to favourites")}}else{alert("An error occurred while trying to add entry to favourites.")}})})}function removeEntryFromFavourites(entryId,onSuccess){ifLoggedIn(function(){$.post(BaseUrl+"/remove-from-favs",{id:entryId},function(data){if(data&&data.status){if(arguments.length>1&&onSuccess&&$.isFunction(onSuccess)){onSuccess()}else{alert("Entry removed from favourites")}}else{alert("An error occurred while trying to remove entry from favourites.")}})})}function setupFollowButtons(){$(document).on("click","button.follow",function(){var ctrl=$(this);ifLoggedIn(function(){var userId=ctrl.data("id");$.post(BaseUrl+"/follow",{id:userId},function(data){if(data&&data.status){$('button.follow[data-id="'+userId+'"]').removeClass("follow").addClass("following");var userPanel=ctrl.closest(".user-info");if(userPanel.length){userPanel.hide("slow",function(){userPanel.remove();var excluded=[];$(".user-info button.follow").each(function(){excluded.push($(this).data("id"))});$.get(BaseUrl+"/recommend-followees",{excluded:excluded},function(li){$("#follow-recommendations .media-list").append(li)})})}}else{alert("An error occurred while trying to follow user.")}})})});$(document).on("click","button.close",function(){})}function showEditEntryDialog(entryId){$("#blog-entry-to-edit").val(entryId);$.post(BaseUrl+"/social/get-microblog-data",{id:entryId},function(data){if(!data.error){$("#edit-blog-text").val(data.text);$("#edit-blog-dialog").modal("show")}else{alert("An error occurred while trying to edit the micro blog.")}})}$("#btn-edit-blog").click(function(){$("#btn-edit-blog, #edit-blog-text").prop("disabled",true);$.post(BaseUrl+"/social/edit-microblog",{id:$("#blog-entry-to-edit").val(),text:$("#edit-blog-text").val()},function(data){if(data&&!data.error){$("#edit-blog-dialog").modal("hide");$("[data-id="+$("#blog-entry-to-edit").val()+"]").parent().html(data.html)}else{alert(data.message)}}).always(function(){$("#btn-edit-blog, #edit-blog-text").prop("disabled",false)})});var updatingPrayerTime=false;var getFromStorage=false;function updatePrayerTime(){enableChangePrayerTimes();updatingPrayerTime=true;var endpoint=$("#prayer-times").data("endpoint");var url=endpoint+"?";if(Storage.get("prayer_country_code")){getFromStorage=true;url+="&country="+Storage.get("prayer_country_code")}if(getFromStorage&&Storage.get("prayer_city_id")){url+="&city="+Storage.get("prayer_city_id")}if(getFromStorage){getPrayerTime(url)}else if(navigator.geolocation&&navigator.permissions){navigator.permissions.query({name:"geolocation"}).then(function(PermissionStatus){if(PermissionStatus.state==="granted"){navigator.geolocation.getCurrentPosition(function(position){url+="&latitude="+position.coords.latitude+"&longitude="+position.coords.longitude;getPrayerTime(url)},function(error){getPrayerTimeByDiscover(url)})}else{getPrayerTimeByDiscover(url)}})}else{getPrayerTimeByDiscover(url)}function getPrayerTimeByDiscover(url){var country_id=$("#country-code").val()==="WW"?"SA":$("#country-code").val();url+="&country="+country_id;getPrayerTime(url)}function getPrayerTime(url){$.getJSON(url,function(prayertimesInfo){if(typeof prayertimesInfo.TimeToNextPrayer==="undefined"){$("#prayer-times").closest(".iw-panel").remove();return}if(prayertimesInfo.country_code){Storage.set("prayer_country_code",prayertimesInfo.country_code);if(prayertimesInfo.city_id){Storage.set("prayer_city_id",prayertimesInfo.city_id)}}for(prayer in prayertimesInfo){if($(".prayer-"+prayer).length){$(".prayer-"+prayer+" span.other-pray-time").text(prayertimesInfo[prayer])}}$("#prayer_country").val(prayertimesInfo.country_code);$(".change-location-menu").on("click",function(){if($("#prayer_city").children("option").length===1){var cities_url=$("#prayer_country").data("url");$.get(cities_url,{country_id:prayertimesInfo.country_code},function(citiesHtml){$("#prayer_city").html(citiesHtml);$("#prayer_city").val(prayertimesInfo.city_id)})}});$(".my-location").text(prayertimesInfo.city);$(".other-prays td").removeClass("next-pray");$(".prayer-"+prayertimesInfo.NextPrayerEn).addClass("next-pray");$("#name-of-next-prayer span").text(prayertimesInfo.NextPrayer);var nextPrayerTime=60*60*prayertimesInfo.TimeToNextPrayer+prayertimesInfo.timestamp;$("#time-to-next-prayer").data("time",nextPrayerTime);updatingPrayerTime=false;updateTimeToNextPrayer();setInterval(updateTimeToNextPrayer,1e3);$("#loading_div").fadeOut()})}function updateTimeToNextPrayer(){if(window.visibilityState!=="hidden"){var s=Math.round(parseFloat($("#time-to-next-prayer").data("time"))-Date.now()/1e3);if(s<=0){if(!updatingPrayerTime)updatePrayerTime();return}var _s=s%60,m=(s-_s)/60,_m=m%60,_h=(m-_m)/60;$("#time-to-next-prayer").text(_h+(_m<10?":0":":")+_m+(_s<10?":0":":")+_s)}}function enableChangePrayerTimes(){$(document).on("change","#prayer_country",function(){$("#loading_div").fadeIn("slow");$("#loading-title").text(trans.islamway.loading_cities+" ...").fadeIn("slow");var country_id=$(this).val();var url=$(this).data("url");$.get(url,{country_id:country_id},function(citiesHtml){$("#prayer_city").html(citiesHtml);$("#loading_div").fadeOut()})});$(document).on("change","#prayer_city",function(){$("#loading_div").fadeIn("slow");$("#loading-title").text(trans.islamway.loading_prayertimes+" ...");var city_id=$(this).val();var endpoint=$("#prayer-times").data("endpoint");var url=endpoint+"?dummay="+Math.random();url+="&country="+$("#prayer_country").val();url+="&city="+city_id;getPrayerTime(url);$(".my-location").text($("#prayer_city option:selected").text())})}}function carouselsRtl(){$(".carousel").each(function(){$(this).carousel();var carousel=$(this).data("bs.carousel");carousel.pause();$(this).find("> .carousel-inner > .item:not(:first-child)").each(function(){$(this).prependTo(this.parentNode)});carousel.cycle=function(e){if(!e)this.paused=false;if(this.interval)clearInterval(this.interval);this.options.interval&&!this.paused&&(this.interval=setInterval($.proxy(this.prev,this),this.options.interval));return this};carousel.cycle()})}(function(){var hidden="hidden";if(hidden in document)document.addEventListener("visibilitychange",onchange);else if((hidden="mozHidden")in document)document.addEventListener("mozvisibilitychange",onchange);else if((hidden="webkitHidden")in document)document.addEventListener("webkitvisibilitychange",onchange);else if((hidden="msHidden")in document)document.addEventListener("msvisibilitychange",onchange);function onchange(ev){ev=ev||window.event;window.visibilityState=this[hidden]?"hidden":"visible"}})();var Storage={set:function(key,value){if("localStorage"in window&&window["localStorage"]!==null){localStorage.setItem(key,value)}else{setCookie(key,value,3650)}},get:function(key,defaultValue){if("localStorage"in window&&window["localStorage"]!==null){if(key in localStorage){return localStorage.getItem(key)}else if(typeof defaultValue!=="undefined"){return defaultValue}}else{getCookie(key)}return null},remove:function(key){if("localStorage"in window&&window["localStorage"]!==null){localStorage.removeItem(key)}if(getCookie(key)){setCookie(key,"",-1)}},clear:function(){if("localStorage"in window&&window["localStorage"]!==null){localStorage.clear()}}};var Session={set:function(key,value){if("sessionStorage"in window&&window["sessionStorage"]!==null){sessionStorage.setItem(key,value)}else{setCookie(key,value)}},get:function(key,defaultValue){if("sessionStorage"in window&&window["sessionStorage"]!==null){if(key in sessionStorage){return sessionStorage.getItem(key)}else if(typeof defaultValue!=="undefined"){return defaultValue}}else{getCookie(key)}return null},remove:function(key){if("localStorage"in window&&window["localStorage"]!==null){localStorage.removeItem(key)}if(getCookie(key)){setCookie(key,"",-1)}},clear:function(){if("localStorage"in window&&window["localStorage"]!==null){localStorage.clear()}}};if($('.follower-popover[data-toggle="popover"]').length){$('.follower-popover[data-toggle="popover"]').popover({html:true,trigger:"manual",placement:"top",content:function(){return'<div class="popover-follower col-xs-12 clearfix">'+'<a href="'+(typeof $(this).data("popover").timeline_link!="undefined"?$(this).data("popover").timeline_link:"#")+'" class="col-sm-3 no-padding">'+'<div class="box rounded-img-container">'+'<img src="'+$(this).data("popover").img+'" />'+"</div>"+"</a>"+'<div class="col-sm-9">'+'<h2 class="iw-panel-head">'+'<a href="'+$(this).data("popover").timeline_link+'">'+$(this).data("popover").title+"</a>"+"</h2>"+'<a class="header-link color-semigray" href="'+$(this).data("popover").followers_link+'"><span class="icon-followers"></span>  '+$(this).data("popover").followers+" "+$(this).data("popover").followtext+"</a>"+'<div class="clearfix"></div>'+'<div class="small-follow-btn" style="position: relative; ">'+$(this).data("popover").followMenu+"</div>"+"</div>"+"</div>"}}).click(function(){return false}).mouseover(function(e){_selectedPopover=$(this);if(!$(this).next("div.popover:visible").length){$(".popover").not($(this)).each(function(){if($(this).is(":visible")){var popover=$(this).prev('[data-toggle="popover"]');if(!$(popover).is(_selectedPopover)){var newContent=$(this).find(".popover-content").html();$(popover).data("html",true).data("trigger","manual").data("placement","top").data("content",function(){return newContent}).popover("destroy")}}});$(this).popover("show")}})}$("body").on("click",function(e){if($(e.target).data("toggle")!=="popover"&&$(e.target).parents(".popover.in").length===0){$('[data-toggle="popover"]').popover("hide")}});function setCookie(cname,cvalue,exdays){var expires;if(!isNaN(exdays)){var d=new Date;d.setTime(d.getTime()+exdays*24*60*60*1e3);expires="expires="+d.toUTCString()+";"}document.cookie=cname+"="+cvalue+";"+expires+"path=/"}function getCookie(cname){var name=cname+"=";var ca=document.cookie.split(";");for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==" "){c=c.substring(1)}if(c.indexOf(name)==0){return c.substring(name.length,c.length)}}return false}$(".close_target").click(function(){$($(this).attr("href")).fadeToggle();return false});function setupRelatedEntriesSlider(){if($(".related-slider").length){var _mediaQuery=window.matchMedia("(max-width: 768px)");if(_mediaQuery.matches){$("#related").addClass("mobile")}else{$("#related").removeClass("mobile");$.getCachedScript(CDN_HOST+"/bundles/islamway/js/owl.js",function(){var relatedSliderConf={loop:false,margin:15,nav:true,navText:false,pagination:false,items:1,responsive:{480:{items:1,margin:0},600:{items:2},1200:{items:3}}};if($("body").css("direction")=="rtl"){relatedSliderConf.rtl=true}$(".related-slider").owlCarousel(relatedSliderConf)})}}}function setupSpotlightsSlider(){if($(".wmdat-slider").length){$.getCachedScript(CDN_HOST+"/bundles/islamway/js/owl.js",function(){var sliderConfig={loop:false,margin:15,nav:true,navText:false,pagination:false,items:2,responsive:{600:{items:4}}};if($("body").css("direction")=="rtl"){sliderConfig.rtl=true}$(".wmdat-slider").owlCarousel(sliderConfig)})}}$(document).ready(function(){$('[data-toggle="tooltip"]').tooltip();$(".profile-nav1-trig").click(function(){$(".profile-nav").slideToggle()});$(".main-menu-trigger").click(function(){$("body").toggleClass("fixed-body");$("#main-menu").toggleClass("main-menu-shown")});$(".brand-bar-user .dropdown-toggle").click(function(){$("body").toggleClass("fixed-body")});$(".change-location-menu").click(function(ev){ev.preventDefault();$("#change-pray-city").slideToggle()});var isSamsungBrowser=navigator.userAgent.match(/SamsungBrowser/i);var didScroll=false;var gotoButton=$("#gotop");gotoButton.hide();if(!isSamsungBrowser){$(window).scroll($.throttle(50,function(){didScroll=true;if(!gotoButton.is(":visible")&&$(this).scrollTop()>100){gotoButton.fadeIn(300)}else if(gotoButton.is(":visible")&&$(this).scrollTop()<=100){gotoButton.fadeOut(300)}}))}gotoButton.click(function(){$("html, body").animate({scrollTop:0},500);return false});var lastScrollTop=0;var delta=1;var navbarHeight=$("header").outerHeight();setInterval(function(){if(didScroll){didScroll=false;hasScrolled()}},50);function hasScrolled(){var st=$(this).scrollTop();if(Math.abs(lastScrollTop-st)<=delta)return;if(st>lastScrollTop&&st>navbarHeight){$(".nav-onscroll").removeClass("nav-down").addClass("nav-up")}else{if(st+$(window).height()<$(document).height()){$(".nav-onscroll").removeClass("nav-up").addClass("nav-down")}}lastScrollTop=st}});$(document).on("mouseup touchend",function(e){var container=$(".inner-menu");if(!container.is(e.target)&&container.has(e.target).length===0){$("body").removeClass("fixed-body");$("#main-menu").removeClass("main-menu-shown")}});$(document).on("copy",".entry-view",function(){var url=document.location.href;var sharing=$(".sharing-icons");if(sharing.length==1){url=sharing.data("url")}var selection=window.getSelection(),pagelink="<br /><br /> "+trans.islamway.post_url+": "+url,copytext=selection+pagelink,newdiv=document.createElement("div");newdiv.style.position="absolute";newdiv.style.left="-99999px";document.body.appendChild(newdiv);newdiv.innerHTML=copytext;selection.selectAllChildren(newdiv);window.setTimeout(function(){document.body.removeChild(newdiv)},100)});$(".profile-nav-trig").click(function(){$(".profile-nav-trig span").toggleClass("icon-arrow-down").toggleClass("icon-close-tab")});if("Notification"in window&&Notification.permission==="default"){if(!getCookie("notificationRequest")){$(".hide-notification-request").removeClass("hide-notification-request")}$(".btn-notification a").click(function(e){e.preventDefault();$(this).parent().addClass("hide-notification-request");if($(this).hasClass("push-later")){setCookie("notificationRequest","postponed",7)}})}